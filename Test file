from flask import Flask, request, redirect
from twilio.twiml.messaging_response import MessagingResponse

app = Flask(__name__)

@app.route("/sms", methods=['GET', 'POST'])
def incoming_sms():
    """Send a dynamic reply to an incoming text message"""
    # Get the message the user sent our Twilio number
    body = request.values.get('Body', None)

    # Start our TwiML response
    resp = MessagingResponse()

    # Determine the right reply for this message
    if body == 'hello':
        resp.message("Hi!")
    elif body == 'bye':
        resp.message("Goodbye")

    return str(resp)

if __name__ == "__main__":
    app.run(debug=True)




#################################################
from twilio.rest import Client

account_sid = 'AC259360e62385c7aa7af39d2939ee281d'
auth_token = '3411e290cb2965c0d23004055df1a40b'
to_phone_number = ('+14146307901')
message_to_send= ("enter a zip")
client = Client(account_sid, auth_token)


message = client.messages.create(body= message_to_send, from_='+14143016961', to = to_phone_number)
print(message)

import requests

zip = input("Enter ZIP code to retrieve forecast: ");

urlToPull = "http://api.weatherunlocked.com/api/current/us." + zip + "?app_id=788457e7&app_key=778e3407a9a12b7a80be56e9bdded99f";


r = requests.get(urlToPull)

data = r.json();

text = ("Here is the weather for "+ zip + str(data["temp_f"]));




message = client.messages.create(body= text , from_='+14143016961', to = to_phone_number)
print(message)
